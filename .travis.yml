language: java
jdk: openjdk8
services:
  - docker
addons:
  firefox: latest
before_install:
  - echo $TRAVIS_BUILD_DIR
  - docker run --rm hello-world
before_script:
  - docker-compose up -d postgres mysql
  - docker-compose run --rm waitforpostgres
  - docker-compose run --rm waitformysql
  - sleep 7
script:
  - java -version
  - docker ps -a
  - docker-compose exec mysql mysql domain -udomain -pdomain -e "select database()"
  - docker-compose exec postgres psql lportal -U liferay -c "select current_database()"
